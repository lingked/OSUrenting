<%- include ("../partials/header") %>

<div class="container">
	<div class="row">

		<h1 style="text-align: center">Add new renting information to <%= apartment.name %></h1>
		<div style="width: 30%; margin: 20px auto">
			<form action="/apartments/<%= apartment._id %>/shares" method="POST" 
				  enctype="multipart/form-data">
				<div class="form-group">
					<input class="form-control" type="text" name="share[title]" placeholder="title" required>
				</div>
				<div class="form-group">
					<input class="form-control" type="text" name="share[text]" placeholder="text">
				</div>
				<div class="form-group">
					<input class="form-control" type="text" name="share[contact]" placeholder="contact" required>
				</div>
				<div>
					  <input id="input-file" type="file" name="myImage" accept="image/jpg, image/jpeg, image/png" multiple="multiple" onchange="checkFiles(this.files)"/>
				</div>
				<script>
					
					
					  function checkFiles(files) {       
						  if(files.length>3) {
							alert("Maximum 3 files including jpg jpeg png");
							  	document.getElementById("input-file").value = "";
								return false;
							} else{
								Array.from(files).forEach(file => {
									var ext = file.name.split('.').pop();
									if(ext!='jpg'&&ext!='jpeg'&&ext!='png'){
										alert("Type should be jpg jpeg or png");
							  			document.getElementById("input-file").value = "";
										return false;
									}
								});
								return true;
							}
					  }
      			</script>
				<div class="form-group">
					<button class="btn btn-lg btn-default btn-block btn-primary">Submit!</button>
				</div>
			</form>
			<a class="btn btn-sm" href='/apartments/<%= apartment._id %>/shares'>Go back</a>
		</div>
		
	</div>
</div>

<%- include ("../partials/footer") %>